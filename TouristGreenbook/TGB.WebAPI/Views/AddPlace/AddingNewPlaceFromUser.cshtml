@{
    ViewData["Title"] = "Adding of a new place";
}


<div>
    <h2>Add a new place</h2>
    <form method="post" action="/AddPlace/AddingPlaceToDataBase">
        <table>
            <tr>
                <td><p>Name</p></td>
                <td><input type="text" name="Name" /></td>
            </tr>
            <tr>
                <td><p>Type</p></td>
                <td><input type="text" name="Type" /></td>
            </tr>
            <tr>
                <td><p>City</p></td>
                <td><input type="text" name="City" /></td>
            </tr>
            <tr>
                <td><p>Address</p></td>
                <td><input type="text" name="Address" /></td>
            </tr>
            <tr>
                <td><p>Opens at</p></td>
                <td><input type="text" name="WorkTimeStart" /></td>
            </tr>
            <tr>
                <td><p>Closes at</p></td>
                <td><input type="text" name="WorkTimeFinish" /></td>
            </tr>
            <tr>
            <tr>
                <td><p>Coordinates</p></td>
                <td><input type="text" id="coord" name="Coordinates" /></td>
            </tr>
            <tr>
                <td><p>Latitude</p></td>
                <td><input type="text" id="lat" name="Latitude" /></td>
            </tr>
            <tr>
                <td><p>Longtitude</p></td>
                <td><input type="text" id="long" name="Longtitude" /></td>
            </tr>
            <tr>
                <td><p>Description</p></td>
                <td><input type="text" name="Description" /></td>
            </tr>
            <tr>
                <td><p>Rating</p></td>
                <td><input type="text" name="Rating" /></td>
            </tr>
            <tr>
                <td><input type="submit" value="Submit" /></td>
            </tr>
            <tr>

                <td><input type="hidden" name="PlaceState" value="Processed" /></td>
            </tr>
        </table>
    </form>

</div>

<style>
    #map, #map_canvas {
        width: 500px;
        height: 500px;
    }
</style>

<div id="map_canvas" style="width: 500px; height: 250px;"></div>


<div>
    <div id="map"></div>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7tnGRfh4zut21AaOKJpBEGIh7UXJobVM&callback=initMap">
    </script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
        var map;

        function initialize() {
            var myLatlng = new google.maps.LatLng(49.8382600, 24.0232400);

            var myOptions = {
                zoom: 8,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            var marker = new google.maps.Marker({
                draggable: true,
                position: myLatlng,
                map: map,
                title: "Your location"
            });

            google.maps.event.addListener(marker, 'drag', function (event) {

                document.getElementById("lat").value = event.latLng.lat();
                document.getElementById("long").value = event.latLng.lng();
                document.getElementById("coord").value = event.latLng;
            });
            google.maps.event.addListener(marker, 'dragend', function (event) {

                document.getElementById("lat").value = event.latLng.lat();
                document.getElementById("long").value = event.latLng.lng();
                document.getElementById("coord").value = event.latLng;
            });
            google.maps.event.addListener(map, 'click', function (event) {
                document.getElementById("lat").value = event.latLng.lat();
                document.getElementById("long").value = event.latLng.lng();
                document.getElementById("coord").value = event.latLng;
                marker.setPosition(event.latLng);
                
            });
            

        }
        
        google.maps.event.addDomListener(window, "load", initialize());
    </script>
</div>
